name: Test plugins

on:
  schedule:
    - cron: '*/10 * * * *'  # Run every 10 minutes
  workflow_dispatch:  # Allow manual triggering
    inputs:
      batch_size:
        type: number
        default: 100

permissions:
  contents: write  # Add this line to grant write permissions

jobs:
  run-scripts:
    runs-on: ubuntu-latest
    steps:
      - uses: ./.github/actions/setup-node

      - name: Run plugin batch
        run: ./scripts/run-batch.sh --batch-size ${{ inputs.batch_size }} --plugins

